<!-- @format -->

# 멘토 미팅 정리

## 2022-03-07 (월) - 조영도 멘토님

### 프로젝트 피드백

장애인들을 위한 포트폴리오 페이지, 하트(주시하고 있고 응원하고 있고 등), 통용되고 있는 컨텐츠의 가치를 부가할 수 있는 것 등을 추가했으면 좋겠다.

백엔드의 기능이 강화가 되었다. (로그인 서비스, 회원을 분류하는 것, 장애인 증명서 인증 등) nft 판매 금액에 대한 분배(중앙화 되어 보임) SSO 기능, 중앙화 된 기능을 어떻게 풀 수 있을까 고민해보기

프로들을 위한 프로젝트도 있지만 아마추어들, 비주류 크리에이터들이 세상의 교두보로 사용되고 있다. 그런 점에서 이 프로젝트는 방향이 맞는 것 같다.

백엔드 구현을 덜 수 있는 부분이 없을까?  
백엔드에서는 어카운트마다 현재 소유하고 있는 토큰 아이디만 관리.
account를 중심으로 간단하게 닉네임, 장애인 여부 등으로 축소해도 좋을 것 같음

스토리텔링을 강화하면 좋겠다. (어떤 방식으로 기부가 되는지 / 왜 갑자기 기부 단체가 나오는지에 대한 의문 발생)

### Q&A 답변

Q1. 상기된 기능들을 모두 구현할 수 있을까요? 제외하거나 개선해야할 부분을 말씀해주시면 적극 반영하겠습니다.  
A1. 위에서 답변완료

Q2 - 1. OAuth2.0을 이용해 Naver나 Kakao의 로그인 및 회원가입을 지원할 예정인데 접근성을 위해 회원가입이 될 때 저희의 서비스 계정이 먼저 생성되고 연동 정보가 저장되어 Twitch로그인하든 Youtube로 로그인하든(추가로 연동시켰다면) 하나의 저희 서비스 아이디로 연결되게 구현을 할 수 있을까요? 검색으로 찾아도 정보가 부족해서 할 수 있다면 어떻게 할 수 있을지 조언 부탁드립니다.  
A2 - 1. 이것이 필요한 이유가 뭔가요?

Q2 - 2. 편의성을 위해서 넣었습니다. 장애인의 경우, 불편한 점들이 많기 때문에 줄였습니다.  
A2 - 2. 최근 편의성을 위해 많은 곳에서 사용을 하고 있는 경우가 많습니다. 하지만 Web3 dApp 프로젝트를 만드는 입장에서는 굳이라는 생각이 듭니다.

Q3. 상용화 단계까지 고려해서 실무와 같이 안정성과 확장성을 잡기 위해 백엔드에서 SpringBoot와 MongoDB를 사용하려고 하는데 혹시 다른 고려사항이 있을까요?  
A3. 저는 기본적으로 여러분들이 쓰기 편한(숙련도가 높은) 기술스택을 사용하면 된다고 생각합니다. 어떤 프레임워크를 사용하더라도 여러분들이 익힌 스택이 실무에서 사용되고 있는 기술들이기 때문에 전혀 문제가 되지 않고 숙련도가 높은(빨리 빨리 생산성이 있는) 기술스택을 사용하시면 됩니다.

Q4 - 1. 요새 트래블룰로 인해 국내 코인의 개인지갑 전송이 불가능 해졌는데 이런 규제가 언제 완화될지 만약 상용화를 고려한다면 어떻게 현재 상황에서 가능할 지 궁금합니다.  
A4 - 1. 저희도 알 수가 없습니다... ㅠㅠ 저도 궁금하네요.

Q4 - 2. 이런 것을 우회할 수 있는 방법은 없을까요?  
A4 - 2. 합법인 국가에 법인을 세우시면 됩니다. 아니면 이런 것에 제제를 넣지 않는 후보가 있었나요?

Q5. 혹시 현재 프로젝트에서 더 나아가 유저 접근성을 개선을 위해 Terra네트워크 프로젝트와 연계해서 TerraKRW 원화 스테이블코인을 이용한 NFT 거래소를 만든다고 하면 Rust를 이용해 스마트컨트랙을 작성하고 Terra의 CosmWasm CW721 표준으로 NFT를 만들 것 같은데 ERC-721과 다른 점과 우려사항이 있을까요?  
A5. 아마 표준은 비슷할 것입니다. 제가 확실하게 말씀드리지는 못하지만 어쩄든 모든 NFT 프로젝트들이 이더리움의 ERC-721을 기초로 다 뻗어나간 것이고 결국 이더리움에서 통용이 안되면 가치가 하락하게 되어있는 구조입니다. 그렇기 때문에 정확하게 확신은 할 수 없지만 다 ERC-721에서 파생된 형태로 구현되어 있을 것이라고 생각이 됩니다.  
당연히 스테이블 코인을 가지고 있고 해당 코인을 기반으로 NFT가 발행이 되면 가치의 유동성(변동성)에 대한 방어수단이 될 수는 있겠죠. 한편으로는, 코인의 가치에서도 변동성에 대한 차익을 노리는 집단이 있기 때문에 Trade-off라고 생각합니다.

Q6. 현재 프로젝트의 개발이 프론트, 백엔드 뿐만 아니라 블록체인 스마트컨트랙을 개발할 인원도 필요한데 팀이 5인이라 개발 인력 분배는 어떻게 해야 잘 할 수 있을까요?  
A6. 프론트에서 보여줄 수 없으면 서비스화 할 수 없고, 완성될 수 없기때문에 프론트에 많은 인력이 필요합니다.  
백엔드에서는 잘 하는 사람이 획기적으로 빠르게 쳐주고, 스마트 컨트랙트는 로직이 들어가는 부분이기 때문에 주로 개발하는 분이 있으셔야 합니다. 그 분이 적극적으로 코드 리뷰를 받으셔야 하고, 문제가 발생한 경우, 팀원들과 소통을 해야합니다. 그렇기 때문에 해결했던 내용을 정리해서 팀원들과 리뷰(지식 공유)를 하면 프로젝트의 퀄리티가 많이 올라갈 것이라고 생각합니다.

Q7. ERC-721, ERC-20과 같은 이더리움 표준을 좀 더 쉽고 빠르게 학습할 수 있는 팁이 있을까요?  
A7. 이 프로젝트들은 다 오픈소스입니다. 찾아보신 분들도 있겠지만 찾아볼 수 있는 샘플이 엄청나게 많습니다. 이더스캔을 보더라도 맨 오른쪽 상단에 토큰 종류별, 랭킹별, 각각에 들어가면 이더스캔으로부터 verified된 컨트랙트 코드가 쫙 나옵니다. 그럼 이 코드들을 이해하고 활용을 해 보세요. 이해를 못하고 사용을 하면 뒤에서 많이 고생할 것입니다.  
또한 표준 문서를 보는걸 중요하게 생각합니다. 영어로 되어있고, 자료가 어려운거 저도 잘 알지만, 현업에서도 봐야하는 내용이고 참고할 내용이 없을때 공식문서만큼 좋은 자료가 없거든요. 그렇기 때문에 힘들어도 의미를 진짜 찾아보실려면 공식문서를 참고하시면 될 것 같습니다.

Q8 - 1. 체리라는 플랫폼을 보면 기부를 원화로 결제를 하면 내부적으로는 토큰을 원화 갯수에 맞춰서 발행을 해서 어디에 후원을 했다는 방식으로 기록을 남기는 것 같은데, 이런 식으로 원화결제를 하면 스마트 컨트랙트로 인식을 해서 NFT를 교환한다거나 이런 식으로 구현을 할 수 있을까요?  
A8 - 1. 구현은 가능합니다. 하지만 스마트 컨트랙트는 외부에서 누군가 트리거를 해줘야합니다.

Q8 - 2. 그렇다면 중앙화가 된 점이 있다는 것인가요?  
A8 - 2. 그렇죠. 그건 어쩔수 없을것입니다. 원화랑 토큰이랑 어떻게든 등가로 교환이 되도록 되어야 합니다. 이런 로직이 이미 구현이 되어 있다고 하더라도 누군가 외부에서 호출을 한 번은 해줘야하기에 호출을 해주는 주체가 있어야합니다.  
어쨌든 스마트 컨트랙트 혼자 트리거가 되는 주체가 될 수는 없습니다.

---

## 2022-03-29 (화) - 조영도 멘토님

### Q&A 답변

Q1-1. 서명하는 방법에 대해서  
메타마스크에서 바로 처리를 하면 될 것 같은데 2번 방식처럼 server를 통해 작업을 하는 이유는 무엇이며 어떤 방식을 사용하는 게 프로젝트에 좋을지?  
A1-1. 서버에 기록을 남기기 위함입니다.  
우리 시스템에 사용자가 서명을 함으로써 로그인을 한 기록을 남기는 것.  
서버에 기록을 남긴다는 것은 DB나 로깅을 하고있을 것이다. 이렇게 하는 이유는 나중에 백엔드에서 이 내용을 사용하고 싶기 때문입니다.

Q1-2. 만약 2번 방식으로 한다면 프론트에서 어떻게 Web3로 요청을 해야 백엔드를 거쳤다가 서명을 할 수 있나요?
A1-2. 메타마스크를 사용한다고 하면 API를 사용해서 메타마스크를 Enable시키고 이 과정이 다 되면 백엔드로 API를 한 번 쏘는 것입니다. Address를 파라미터로 해서 백엔드의 API를 호출해서 백엔드에 남기는 것입니다. 서명을 하기전에 처리하고 서명을 해도 괜찮습니다. 이건 프로세스를 설계하는 차이기 때문에 문제되지 않습니다.

Q2-1. 오픈씨에서는 1번 방식으로 진행하는 것 같은데(민팅할 때, 프로필 들어갈 때), 우리 프로젝트에서도 MetaMask와 연동을 하면 다른 방식은 생각 안 해도 되는지?
A2-1. 오픈씨의 네트워크 API 호출하는 것을 본적이 없어서 정확히는 모르겠습니다.
Q2-2. 저희가 봤을 때, 오픈씨가 GraphQL로 요청하는 것으로 봤습니다.  
A2-2. 그럼 백엔드로 요청하는 것이 맞네요.

Q3-1. 서명하는 이유는 단순히 사용자가 맞는지 검증하는 용도로 사용하는 것인지, 아니면 다른 이유가 있는 것인지?  
A3-2. 프론트의 서명이나 개인키는 지갑의 개념과 깊은 연관이 있는데, 지갑의 매커니즘에 대해서 아시는 분이 있나요? (이하 설명) 서명을 하는 이유는 내가 이 트랜잭션의 주인이 맞는 지, 그리고 이 자산에 대해서 진짜 주인이 맞는 지 검증하는 용도입니다. 블록체인에서는 많이 쓰이는 용어인데 검증, 부인 방지를 위해서 사용합니다.

### 지갑이란?

우리가 가지고 있는 지갑과 다르단 것은 알고 있으시죠? private key를 보관하는 Data Structure입니다. private key를 가지고 public key를 만들고 public key를 가지고 Wallet address를 만듭니다.

Q4-1. 스켈레톤 코드에서 NFT를 등록할 때, 지갑 주소가 아닌 개인 키를 입력함으로써 지갑 주소를 들고 오는 방식으로 되어있는데 이런 방식으로 구현되어 있는 이유가 따로 있는지? 장점이나 이렇게 해야만 하는 이유?  
A4-1. 개인키를 가지고 네트워크에 올려져있는 Balance(토큰 or NFT 등)의 트랜잭션이 존재하는데 이 트랜잭션을 검증할 수 있는게 private key입니다. 그래서 내 private key만 가지고 있으면 네트워크에 올려져 있는 것이 내 것임을 증명할 수 있습니다.  
개인키를 입력하는 게 스켈레톤 코드 안에 지갑 기능이 따로 없는데, 그렇기 때문에 개인키를 입력하는 단순한 방식으로 처리를 하였습니다. 만약 메타마스크같은 지갑 서비스들은 private key를 좀 더 안전하게 관리를 하고 서명이 필요할 때, 엑세스를 하는 부가기능을 제공하죠

Q5-1. 트랜잭션을 통해서 주인인지를 검증할 수 있다고 하셨는데 프론트에서 서명을 해서 백엔드에서 서명한 것이 주인이 맞는지는 어떻게 확인할 수 있나요?  
A5-1. 보낼 때, public key를 같이 태워서 보냅니다. 비대칭 키의 특징인데 private key로 인크립션을 하면 public key로 디크립션을 할 수 있습니다. 반대로 public key로 인크립션을 하면 private key로 디크립션을 할 수 있습니다. 이런 특징을 이용해서 내 pirvate key로 인크립션된 트랜잭션과 public key를 같이 보냅니다. 그럼 public key의 주인이 누군지는 모르지만 주인이 맞는 지는 검증이 가능합니다.

Q6-1. 주 DB로는 MySQL을 쓰는 중인데 로깅관련 캐시 or DB 뭐 써야할 지 궁금합니다. (몽고DB vs Redis)  
A6-1. 단순히 캐싱, 기록으로 쌓이지 않아도 된다면 캐시 쓰시면 됩니다. 하지만, 저장이 되고 계속해서 사용해야 한다면 DB를 써야겠죠. 근데 DB도 여러분이 쓰기 편한 거 쓰시면 될 것 같아요. 성능에 이슈가 있어서 (메모리에 저장을 해야해서 Redis를 꼭 써야해 등)가 아니라면 쓰기 편하신 거 선택하시면 됩니다.

Q6-2. 2주전의 질문이다 보니 벌써 해결하였습니다. 저희가 Mongo DB를 사용하기로 결정하였는데 이는 거래를 했을 때 통계정보를 서비스하기 위해서 입니다. 거래를 했을 때, 거래 결과를 로깅하는 데 통계로 서비스를 제공하려고 하면 계산이 백엔드에서 처리가 되어야 하는지? 아니면 프론트에서 처리가 되어야 하는지 궁금합니다.  
A6-2. 무거운 로직은 다 백엔드에서 처리하는 것이 맞다고 봅니다. 물론 프론트에서 처리를 할 수 있지만 프론트는 비쥬얼적으로 보여주는 것이기 때문에 서비스를 받는 유저들이 어떤 기기를 사용할 지 모르기 때문에 백엔드에서 다 처리를 하고 데이터를 보내주는 것이 맞다고 봅니다. 통계적인 기능을 쓰기위해 백엔드를 쓴다고 하면 백엔드에서 필요한 연산과 정확성 검사를 다 처리하는 것이 맞습니다.

Q6-3. 그렇다면 계속 같은 정보에 대한 요청을 백엔드에서 처리해야한다고 하면 계속 함수가 수행되는 것이 아니라 최대한 리소스를 줄일 방법이 있을까요?
A6-3. 사실 배치를 돌립니다. 정산 시스템이나 이커머스 시스템을 보면 서비스를 하루 전까지 거래 내에서 여러 소상공인들의 계좌 정산을 돌리기 위해 특정 시간에 배치가 돌아갑니다. 한번에 처리를 해두고 요정이 왔을 때는 매번 처리를 하는 것이 아니고 한번에 배치를 가지고 데이터에 대한 통계를 정리해서 처리를 합니다.

Q7-1. NFT를 발행하면 발행된 정보는 모두 배포된 스마트 컨트랙트?에서 조회 가능한 것인지 궁금합니다.  
Q8-1. NFT 거래를 하기 위해 등록하면 등록된 NFT는 블록체인에서 조회하는 것인지 아니면 백엔드에서 조회하는 것인지 궁금합니다.

위 두 질문은 이미 해결했습니다.

Q9-1. 혹시 현업에서는 판매중인 리스트를 스마트 컨트랙트로 만들어서 보여주지는 않죠?  
A9-1. 현업에서는 안하는 것 같아요. 너무 헤비하고 가스비도 많이 들어서 사용하지 않습니다. 이런 부분은 특히 가스비 때문에 못합니다.

Q10-1. 스마트 컨트랙트에 팩토리 패턴이 있는데, 이를 어떻게 구성해야 할지 애매하다고 하시는 데 좋은 방법이 있을까요?  
A10-1. 스마트 컨트랙트에 있는 패턴이 아니고, 객체 지향 언어에서 나온 개념입니다. 팩토리가 뭔가 정형화된 데이터를 찍어내는 거잖아요? 팩토리 패턴을 찾아보시면 개념을 더 이해하기 쉬울 것 같습니다.  
우리는 거래가 생성될 때마다 매번 컨트랙트를 배포하는 것이 아닌, 이미 배포된 컨트랙트에 새로운 값을 만들겠다는 것이에요.

Q11-1. 혹시 저희가 구현을 했을 때, 팩토리 패턴으로 만든 것이 아닌데 혹시 차이나 단점 또는 하면 안되는 이유가 있을까요?  
A11-1. 없습니다. 전혀 없어요. 다만 차이라고 한다면 모든 판매에 대해서 하나의 컨트랙트로 관리를 할 수 있다는 것이 장점일 것 같지만 하나의 거래에 하나의 컨트랙트로 연결이 되니까 인덱스로 관리를 할 필요가 없겠죠. 각각의 거래에 대한 컨트랙트의 주소는 팩토리가 가지고 있어야 겠지만 모든 거래를 하나의 컨트랙트에서 관리하려면 복잡해 질 수 밖에 없습니다.  
내부 state가 좀더 계층화 되는 것은 단점이지만 하나의 단일화된 컨트랙트로 모든 거래를 바꿀 수 있으니까 편리할 수 있다. 그렇기에 정답은 없습니다.

번외 질문)  
Q. 블록체인 개발자를 지망하고 있는데 솔리디티에 있는 델리케이트 콜을 보면 오피코드 같은게 있던데 이런건 혹시 어디서 배울 수 있을까요?  
A. 혹시 어셈블리어 아시나요?  
Q. 있는 것은 알지만 어떻게 동작하는 지는 잘 모릅니다.  
A. 만약에 위에서 물어본 것들일 좀더 딥하게 배우고 싶다면 오피코드를 이해할 수 있는 어셈블리어나 OS를 공부하시면 됩니다.

Q. 혹시 신입 블록체인 개발자가 되고싶다면 어느정도까지 학습이 되었으면 좋겠다고 생각하시는 것이 있나요?  
A. 저희 회사는 아무것도 모르고 오셔도 다 가르쳐드리고 있습니다. 기술은 하다보면 늘기 때문에 기술을 배울 수 있는 머리와 열정만 있으면 됩니다.
